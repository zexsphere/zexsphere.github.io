<!doctype html><html lang=en><head><meta charset=utf-8><meta name=referrer content="same-origin"><title>CMake components - use Doxygen :: Zex</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="该图片由 Raka C. 在 Pixabay 上 发布
Doxygen 使用流程 1. 生成配置 $ doxygen -g Doxyfile.in 2. 修改配置 根据需要修改 Doxyfile.in 里的选项
# Project related configuration options DOXYFILE_ENCODING = UTF-8 PROJECT_NAME = &amp;#34;My Project&amp;#34; PROJECT_NUMBER = v0.1.0 PROJECT_BRIEF = &amp;#34;a research project&amp;#34; PROJECT_LOGO = OUTPUT_DIRECTORY = doc/ ALLOW_UNICODE_NAMES = NO OUTPUT_LANGUAGE = English OPTIMIZE_OUTPUT_FOR_C = YES # Configuration options related to the input files INPUT = @PROJECT_SOURCE_DIR@ RECURSIVE = YES EXCLUDE = @PROJECT_SOURCE_DIR@/etc @PROJECT_SOURCE_DIR@/build USE_MDFILE_AS_MAINPAGE = @PROJECT_SOURCE_DIR@/README."><meta name=keywords content=","><meta name=robots content="noodp"><link rel=canonical href=/post/0007/><link rel=stylesheet href=/assets/style.min.css?d41d8cd98f00b204e9800998ecf8427e><link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/favicon/apple-icon-precomposed.png><link rel="shortcut icon" href=/img/favicon/orange.png><meta name=twitter:card content="summary"><meta property="og:type" content="article"><meta property="og:title" content="CMake components - use Doxygen :: Zex"><meta property="og:description" content="代码生成文档"><meta property="og:url" content="/post/0007/"><meta property="og:site_name" content="Zex"><meta property="og:image" content="https://pic.imgdb.cn/item/64ddf54b661c6c8e54daf4e9.png"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2023-08-17 11:04:38 +0800 +0800"></head><body><div class="container center headings--one-size"><header class=header style=background-image:url(/img/mountain/mountains-g47d3aaa15_1280.jpg);background-position:50%;background-repeat:no-repeat;background-size:cover><div class=header__inner><div class=header__logo><a href=/><div class=logo>Zex</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about>About</a></li><li><a href=/archive>Archive</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about>About</a></li><li><a href=/archive>Archive</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title>CMake components - use Doxygen</h1><div class=post-meta><span class=post-date>2023-08-17</span>
<span class=post-author>::
zexsphere</span></div><span class=post-tags>#<a href=/tags/doxygen/>doxygen</a>&nbsp;
#<a href=/tags/cmake/>cmake</a>&nbsp;</span>
<img src=https://pic.imgdb.cn/item/64ddf54b661c6c8e54daf4e9.png class=post-cover><div class=post-content><div><p>该图片由 Raka C. 在 Pixabay 上
<a href=https://pixabay.com/zh/illustrations/dam-floodgate-stop-gates-8176005/>发布</a></p><h2 id=doxygen-使用流程>Doxygen 使用流程<a href=#doxygen-使用流程 class=hanchor arialabel=Anchor>⚓</a></h2><h3 id=1-生成配置>1. 生成配置<a href=#1-生成配置 class=hanchor arialabel=Anchor>⚓</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ doxygen -g Doxyfile.in
</span></span></code></pre></div><h3 id=2-修改配置>2. 修改配置<a href=#2-修改配置 class=hanchor arialabel=Anchor>⚓</a></h3><p>根据需要修改 Doxyfile.in 里的选项</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># Project related configuration options</span>
</span></span><span class=line><span class=cl><span class=nv>DOXYFILE_ENCODING</span>      <span class=o>=</span> UTF-8
</span></span><span class=line><span class=cl><span class=nv>PROJECT_NAME</span>           <span class=o>=</span> <span class=s2>&#34;My Project&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>PROJECT_NUMBER</span>         <span class=o>=</span> v0.1.0
</span></span><span class=line><span class=cl><span class=nv>PROJECT_BRIEF</span>          <span class=o>=</span> <span class=s2>&#34;a research project&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>PROJECT_LOGO</span>           <span class=o>=</span>
</span></span><span class=line><span class=cl><span class=nv>OUTPUT_DIRECTORY</span>       <span class=o>=</span> doc/
</span></span><span class=line><span class=cl><span class=nv>ALLOW_UNICODE_NAMES</span>    <span class=o>=</span> NO
</span></span><span class=line><span class=cl><span class=nv>OUTPUT_LANGUAGE</span>        <span class=o>=</span> English
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>OPTIMIZE_OUTPUT_FOR_C</span>  <span class=o>=</span> YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Configuration options related to the input files</span>
</span></span><span class=line><span class=cl><span class=nv>INPUT</span>                  <span class=o>=</span> @PROJECT_SOURCE_DIR@
</span></span><span class=line><span class=cl><span class=nv>RECURSIVE</span>              <span class=o>=</span> YES 
</span></span><span class=line><span class=cl><span class=nv>EXCLUDE</span>                <span class=o>=</span> @PROJECT_SOURCE_DIR@/etc @PROJECT_SOURCE_DIR@/build 
</span></span><span class=line><span class=cl><span class=nv>USE_MDFILE_AS_MAINPAGE</span> <span class=o>=</span> @PROJECT_SOURCE_DIR@/README.md
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Configuration options related to the LaTeX output</span>
</span></span><span class=line><span class=cl><span class=nv>GENERATE_LATEX</span>         <span class=o>=</span> NO
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Configuration options related to the HTML output</span>
</span></span><span class=line><span class=cl><span class=nv>GENERATE_TREEVIEW</span>      <span class=o>=</span> YES
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Configuration options related to diagram generator tools</span>
</span></span><span class=line><span class=cl><span class=nv>HAVE_DOT</span>               <span class=o>=</span> YES
</span></span><span class=line><span class=cl><span class=nv>CALL_GRAPH</span>             <span class=o>=</span> YES
</span></span><span class=line><span class=cl><span class=nv>CALLER_GRAPH</span>           <span class=o>=</span> YES
</span></span><span class=line><span class=cl><span class=nv>DOT_IMAGE_FORMAT</span>       <span class=o>=</span> svg
</span></span><span class=line><span class=cl><span class=nv>INTERACTIVE_SVG</span>        <span class=o>=</span> YES
</span></span></code></pre></div><h3 id=3-集成到-cmake>3. 集成到 CMake<a href=#3-集成到-cmake class=hanchor arialabel=Anchor>⚓</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-cmake data-lang=cmake><span class=line><span class=cl><span class=c># doxygen.cmake
</span></span></span><span class=line><span class=cl><span class=c></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nb>find_package</span> <span class=p>(</span><span class=s>Doxygen</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nb>if</span> <span class=p>(</span><span class=s>DOXYGEN_FOUND</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>        <span class=nb>message</span><span class=p>(</span><span class=s2>&#34;-- -- Create and Install the HTML based API document&#34;</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>        <span class=nb>set</span><span class=p>(</span><span class=s>DOXYFILE_IN</span> <span class=o>${</span><span class=nv>PROJECT_SOURCE_DIR</span><span class=o>}</span><span class=s>/Doxyfile.in</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>        <span class=nb>set</span><span class=p>(</span><span class=s>DOXYFILE</span>    <span class=o>${</span><span class=nv>PROJECT_BINARY_DIR</span><span class=o>}</span><span class=s>/Doxyfile</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>        <span class=nb>configure_file</span> <span class=p>(</span><span class=o>${</span><span class=nv>DOXYFILE_IN</span><span class=o>}</span> <span class=o>${</span><span class=nv>DOXYFILE</span><span class=o>}</span> <span class=s>@ONLY</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>        <span class=c># make doc
</span></span></span><span class=line><span class=cl><span class=c></span>        <span class=nb>add_custom_target</span> <span class=p>(</span><span class=s>doc</span> <span class=c># ALL 
</span></span></span><span class=line><span class=cl><span class=c></span>                    <span class=s>COMMAND</span> <span class=o>${</span><span class=nv>DOXYGEN_EXECUTABLE</span><span class=o>}</span> <span class=o>${</span><span class=nv>DOXYFILE</span><span class=o>}</span>
</span></span><span class=line><span class=cl>                    <span class=s>WORKING_DIRECTORY</span> <span class=o>${</span><span class=nv>PROJECT_BINARY_DIR</span><span class=o>}</span>
</span></span><span class=line><span class=cl>                    <span class=s>COMMENT</span> <span class=s2>&#34;Generate docs using Doxygen&#34;</span> <span class=s>VERBATIM</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nb>endif</span> <span class=p>()</span><span class=err>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-cmake data-lang=cmake><span class=line><span class=cl><span class=c># CMakeLists.txt
</span></span></span><span class=line><span class=cl><span class=c></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nb>include</span><span class=p>(</span><span class=s>doxygen.cmake</span><span class=p>)</span><span class=err>
</span></span></span></code></pre></div><h3 id=4-doxygen-注释风格>4. Doxygen 注释风格<a href=#4-doxygen-注释风格 class=hanchor arialabel=Anchor>⚓</a></h3><ul><li><p>详细描述</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * ... text ...
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>or</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/************************************************
</span></span></span><span class=line><span class=cl><span class=cm> *  ... text
</span></span></span><span class=line><span class=cl><span class=cm> ***********************************************/</span>
</span></span></code></pre></div></li><li><p>简要描述</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cm>/*! \brief Brief description.
</span></span></span><span class=line><span class=cl><span class=cm> *         Brief description continued.
</span></span></span><span class=line><span class=cl><span class=cm> *
</span></span></span><span class=line><span class=cl><span class=cm> *  Detailed description starts here.
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>or</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>/// Brief description.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cm>/** Detailed description. */</span>
</span></span></code></pre></div></li><li><p>函数内描述</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>var</span><span class=p>;</span> <span class=cm>/**&lt; Detailed description after the member */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>var</span><span class=p>;</span> <span class=c1>//!&lt; Brief description after the member
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>foo</span><span class=p>(</span><span class=kt>int</span> <span class=n>v</span> <span class=cm>/**&lt; [in] docs for input parameter v. */</span><span class=p>);</span>
</span></span></code></pre></div></li></ul><h2 id=效果>效果<a href=#效果 class=hanchor arialabel=Anchor>⚓</a></h2><p>找个 CMake 项目试一下吧。<code>make doc</code> 在 12 线程机器上跑了 3min，算是无缝接入，效果还行。</p><p><a class=post-img-lb href=https://pic.imgdb.cn/item/64ddfb5d661c6c8e54ee0abf.png data-caption><img src=https://pic.imgdb.cn/item/64ddfb5d661c6c8e54ee0abf.png alt></a></p><h2 id=参考>参考<a href=#参考 class=hanchor arialabel=Anchor>⚓</a></h2><ul><li><em><a href=https://www.doxygen.nl/manual/doxygen_usage.html>doxygen - Usage</a></em></li><li><em><a href=https://www.doxygen.nl/manual/config.html>doxygen - Configuration</a></em></li><li><em><a href=https://www.doxygen.nl/manual/docblocks.html>doxygen - Documenting the code</a></em></li><li><em><a href=https://www.cnblogs.com/the-capricornus/p/4717566.html>cmake - configure_file</a></em></li></ul></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button next"><a href=/post/0006/><span class=button__text>Intro to Tun/Tap</span>
<span class=button__icon>→</span></a></span></div></div><script src=https://utteranc.es/client.js repo=zexsphere/zexsphere.github.io issue-term=pathname theme=dark-blue crossorigin=anonymous async></script><noscript>Please enable JavaScript to view the <a href=https://github.com/utterance>comments powered by utterances.</a></noscript></div><div class=post-toc id=post-toc><h2 class=post-toc-title></h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><a href=#doxygen-使用流程>Doxygen 使用流程</a><ul><li><a href=#1-生成配置>1. 生成配置</a></li><li><a href=#2-修改配置>2. 修改配置</a></li><li><a href=#3-集成到-cmake>3. 集成到 CMake</a></li><li><a href=#4-doxygen-注释风格>4. Doxygen 注释风格</a></li></ul></li><li><a href=#效果>效果</a></li><li><a href=#参考>参考</a></li></ul></nav></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>:: Powered by <a href=http://gohugo.io>Hugo</a> 0.115.4</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><a id=back-to-top style=display:inline-block href=javascript:void(0); onclick='window.scrollTo({top:0,behavior:"smooth"})'><span class="iconfont icon-top"></span></a>
<script src=/assets/main.js?d41d8cd98f00b204e9800998ecf8427e></script>
<script>const addCopyButtons=function(e){document.querySelectorAll("pre > code").forEach(function(t){const n=document.createElement("button");n.className="copy-code-button",n.type="button",n.innerText="Copy";const s=document.createElement("div");s.className="copy-code-button-wrap",s.appendChild(n),n.addEventListener("click",function(){e.writeText(t.innerText).then(function(){n.blur(),n.innerText="✔️",setTimeout(function(){n.innerText="Copy"},2e3)},function(){n.innerText="Error"})});const o=t.parentNode;o.insertAdjacentElement("beforebegin",s)})},loadScript=(e,t)=>{var n=document.createElement("script");n.onerror=e=>{throw new URIError("The script "+e.target.src+" didn't load correctly.")},t&&(n.onload=t),document.head.insertAdjacentElement("beforeend",n),n.src=e},loadMermaidOnNeed=()=>{document.querySelectorAll(".mermaid").length>0&&loadScript("https://cdn.jsdelivr.net/npm/mermaid@8.10.1/dist/mermaid.min.js",()=>{document.head.insertAdjacentHTML("beforeend",`<style>.mermaid svg { background-color: #dadcd8 !important; }</style>`),mermaid.initialize({startOnLoad:!1,securityLevel:"strict",logLevel:1,theme:"neutral"}),mermaid.init(),console.log("mermaid init done")})},loadPlantUMLOnNeed=()=>{let e="language-plantuml";document.querySelectorAll("[class^="+e+"]").length>0&&loadScript("https://cdn.jsdelivr.net/gh/jmnote/plantuml-encoder@1.2.4/dist/plantuml-encoder.min.js",()=>{(function(){Array.prototype.forEach.call(document.querySelectorAll("[class^="+e+"]"),function(e){let t=document.createElement("IMG");t.loading="lazy",t.src="http://www.plantuml.com/plantuml/svg/~1"+plantumlEncoder.encode(e.innerText),e.parentNode.insertBefore(t,e),e.style.display="none"})})(),console.log("PlantUML init done")})};window.addEventListener("load",function(){const t=document.links;for(let e=0,n=t.length;e<n;e++)t[e].hostname!=window.location.hostname&&!t[e].href.startsWith("javascript:")&&!t[e].href.startsWith("mailto:")&&(t[e].target="_blank");document.querySelectorAll("#TableOfContents li").length>0&&(document.querySelector("#post-toc").style.display="block"),document.querySelectorAll("#post-toc a").forEach(e=>{e.addEventListener("click",e=>{document.querySelectorAll("#post-toc a").forEach(e=>{e.classList.remove("active")}),e.target.classList.add("active")})}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let t=this.getAttribute("href").substring(1);window.history.pushState({},"","#"+t),document.getElementById(t).scrollIntoView({behavior:"smooth"})})}),navigator&&navigator.clipboard&&addCopyButtons(navigator.clipboard),loadPlantUMLOnNeed(),loadMermaidOnNeed()})</script></div></body></html>