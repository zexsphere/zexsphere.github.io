<!doctype html><html lang=en><head><meta charset=utf-8><meta name=referrer content="same-origin"><title>SVN Command Line Usage With Docker :: Zex</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="该图片由 Gerd Altmann 在 Pixabay 上 发布
Self-Hosted SVN 服务属于 IO 密集型任务。相比于 Git，更适合于频繁进行大型二进制文件的存取。且内存占用极低，从自搭建情况看，一般在 3MB 左右，峰值传输 20MB 左右。
Server with docker 安装服务 docker compose up -d # docker-compose.yaml version: &amp;#39;3.3&amp;#39; services: svn-server: image: garethflowers/svn-server container_name: svn-server volumes: - &amp;#39;/svn:/var/opt/svn&amp;#39; ports: - &amp;#39;3690:3690&amp;#39; 生成仓库 docker exec -it svn-server svnadmin create repo
配置仓库账户文件 位于 ^/repo/conf/{svnserver.conf passwd authz}
# svnserver.conf anon-access = none # 非注册用户权限 auth-access = write # 注册用户权限 password-db = passwd # 密码文件路径 authz-db = authz # 权限文件路径 # passwd user = password # 填写用户名密码注册 # authz [repo:/path] user = rw # 设置用户名拥有的仓库路径权限 Client 安装客户端 sudo pacman -S subversion 拉取服务端仓库 svn checkout svn://path 其余命令用到再查 svn -h Usage 我是为了这点醋，才包的这顿饺子"><meta name=keywords content=","><meta name=robots content="noodp"><link rel=canonical href=/post/0002/><link rel=stylesheet href=/assets/style.min.css?d41d8cd98f00b204e9800998ecf8427e><link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/favicon/apple-icon-precomposed.png><link rel="shortcut icon" href=/img/favicon/orange.png><meta name=twitter:card content="summary"><meta property="og:type" content="article"><meta property="og:title" content="SVN Command Line Usage With Docker :: Zex"><meta property="og:description" content="电子资源管理一直是令人头疼的事情，不妨试试自托管 SVN 服务"><meta property="og:url" content="/post/0002/"><meta property="og:site_name" content="Zex"><meta property="og:image" content="https://pic.imgdb.cn/item/64cdc7231ddac507cc96eccf.jpg"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2023-08-05 08:22:28 +0800 +0800"></head><body><div class="container center headings--one-size"><header class=header style=background-image:url(/img/mountain/mountains-g47d3aaa15_1280.jpg);background-position:50%;background-repeat:no-repeat;background-size:cover><div class=header__inner><div class=header__logo><a href=/><div class=logo>Zex</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about>About</a></li><li><a href=/archive>Archive</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about>About</a></li><li><a href=/archive>Archive</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title>SVN Command Line Usage With Docker</h1><div class=post-meta><span class=post-date>2023-08-05</span>
<span class=post-author>::
zexsphere</span></div><span class=post-tags>#<a href=/tags/infrastructure/>infrastructure</a>&nbsp;
#<a href=/tags/self-hosted/>self-hosted</a>&nbsp;</span>
<img src=https://pic.imgdb.cn/item/64cdc7231ddac507cc96eccf.jpg class=post-cover><div class=post-content><div><p>该图片由 Gerd Altmann 在 Pixabay 上
<a href=https://pixabay.com/zh/photos/a-book-library-read-literature-3480216/>发布</a></p><h2 id=self-hosted>Self-Hosted<a href=#self-hosted class=hanchor arialabel=Anchor>⚓</a></h2><p>SVN 服务属于 IO 密集型任务。相比于 Git，更适合于频繁进行大型二进制文件的存取。且内存占用极低，从自搭建情况看，一般在 3MB 左右，峰值传输 20MB 左右。</p><h2 id=server-with-docker>Server with docker<a href=#server-with-docker class=hanchor arialabel=Anchor>⚓</a></h2><ol><li>安装服务 <code>docker compose up -d</code></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># docker-compose.yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;3.3&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nt>svn-server</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>garethflowers/svn-server</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>svn-server</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;/svn:/var/opt/svn&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;3690:3690&#39;</span><span class=w>
</span></span></span></code></pre></div><ol start=2><li><p>生成仓库 <code>docker exec -it svn-server svnadmin create repo</code></p></li><li><p>配置仓库账户文件 位于 <code>^/repo/conf/{svnserver.conf passwd authz}</code></p></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># svnserver.conf</span>
</span></span><span class=line><span class=cl>anon-access <span class=o>=</span> none     <span class=c1># 非注册用户权限</span>
</span></span><span class=line><span class=cl>auth-access <span class=o>=</span> write    <span class=c1># 注册用户权限</span>
</span></span><span class=line><span class=cl>password-db <span class=o>=</span> passwd   <span class=c1># 密码文件路径</span>
</span></span><span class=line><span class=cl>authz-db <span class=o>=</span> authz       <span class=c1># 权限文件路径</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># passwd</span>
</span></span><span class=line><span class=cl><span class=nv>user</span> <span class=o>=</span> password        <span class=c1># 填写用户名密码注册</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># authz</span>
</span></span><span class=line><span class=cl><span class=o>[</span>repo:/path<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>user</span> <span class=o>=</span> rw              <span class=c1># 设置用户名拥有的仓库路径权限</span>
</span></span></code></pre></div><h2 id=client>Client<a href=#client class=hanchor arialabel=Anchor>⚓</a></h2><ol><li>安装客户端 <code>sudo pacman -S subversion</code></li><li>拉取服务端仓库 <code>svn checkout svn://path</code></li><li>其余命令用到再查 <code>svn -h</code></li></ol><h2 id=usage>Usage<a href=#usage class=hanchor arialabel=Anchor>⚓</a></h2><blockquote><p>我是为了这点醋，才包的这顿饺子</p></blockquote><h3 id=搭建书库>搭建书库<a href=#搭建书库 class=hanchor arialabel=Anchor>⚓</a></h3><p>拥有一座图书馆听起来很酷，按照
<a href=https://gist.github.com/zexsphere/604a37648b7ac04cd99a5ebbd851d699>中图法</a> 将现有书籍分类，托管于云端 SVN 服务中。</p><p><a class=post-img-lb href=https://pic.imgdb.cn/item/64cdb6241ddac507cc70d920.png data-caption><img src=https://pic.imgdb.cn/item/64cdb6241ddac507cc70d920.png alt></a></p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=/post/0003/><span class=button__icon>←</span>
<span class=button__text>Work With An Efficient Environment</span></a></span>
<span class="button next"><a href=/post/0001/><span class=button__text>reading notes for *How to Read a Book* (1)</span>
<span class=button__icon>→</span></a></span></div></div><script src=https://utteranc.es/client.js repo=zexsphere/zexsphere.github.io issue-term=pathname theme=dark-blue crossorigin=anonymous async></script><noscript>Please enable JavaScript to view the <a href=https://github.com/utterance>comments powered by utterances.</a></noscript></div><div class=post-toc id=post-toc><h2 class=post-toc-title></h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><a href=#self-hosted>Self-Hosted</a></li><li><a href=#server-with-docker>Server with docker</a></li><li><a href=#client>Client</a></li><li><a href=#usage>Usage</a><ul><li><a href=#搭建书库>搭建书库</a></li></ul></li></ul></nav></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>:: Powered by <a href=http://gohugo.io>Hugo</a> 0.115.4</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><a id=back-to-top style=display:inline-block href=javascript:void(0); onclick='window.scrollTo({top:0,behavior:"smooth"})'><span class="iconfont icon-top"></span></a>
<script src=/assets/main.js?d41d8cd98f00b204e9800998ecf8427e></script>
<script>const addCopyButtons=function(e){document.querySelectorAll("pre > code").forEach(function(t){const n=document.createElement("button");n.className="copy-code-button",n.type="button",n.innerText="Copy";const s=document.createElement("div");s.className="copy-code-button-wrap",s.appendChild(n),n.addEventListener("click",function(){e.writeText(t.innerText).then(function(){n.blur(),n.innerText="✔️",setTimeout(function(){n.innerText="Copy"},2e3)},function(){n.innerText="Error"})});const o=t.parentNode;o.insertAdjacentElement("beforebegin",s)})},loadScript=(e,t)=>{var n=document.createElement("script");n.onerror=e=>{throw new URIError("The script "+e.target.src+" didn't load correctly.")},t&&(n.onload=t),document.head.insertAdjacentElement("beforeend",n),n.src=e},loadMermaidOnNeed=()=>{document.querySelectorAll(".mermaid").length>0&&loadScript("https://cdn.jsdelivr.net/npm/mermaid@8.10.1/dist/mermaid.min.js",()=>{document.head.insertAdjacentHTML("beforeend",`<style>.mermaid svg { background-color: #dadcd8 !important; }</style>`),mermaid.initialize({startOnLoad:!1,securityLevel:"strict",logLevel:1,theme:"neutral"}),mermaid.init(),console.log("mermaid init done")})},loadPlantUMLOnNeed=()=>{let e="language-plantuml";document.querySelectorAll("[class^="+e+"]").length>0&&loadScript("https://cdn.jsdelivr.net/gh/jmnote/plantuml-encoder@1.2.4/dist/plantuml-encoder.min.js",()=>{(function(){Array.prototype.forEach.call(document.querySelectorAll("[class^="+e+"]"),function(e){let t=document.createElement("IMG");t.loading="lazy",t.src="http://www.plantuml.com/plantuml/svg/~1"+plantumlEncoder.encode(e.innerText),e.parentNode.insertBefore(t,e),e.style.display="none"})})(),console.log("PlantUML init done")})};window.addEventListener("load",function(){const t=document.links;for(let e=0,n=t.length;e<n;e++)t[e].hostname!=window.location.hostname&&!t[e].href.startsWith("javascript:")&&!t[e].href.startsWith("mailto:")&&(t[e].target="_blank");document.querySelectorAll("#TableOfContents li").length>0&&(document.querySelector("#post-toc").style.display="block"),document.querySelectorAll("#post-toc a").forEach(e=>{e.addEventListener("click",e=>{document.querySelectorAll("#post-toc a").forEach(e=>{e.classList.remove("active")}),e.target.classList.add("active")})}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let t=this.getAttribute("href").substring(1);window.history.pushState({},"","#"+t),document.getElementById(t).scrollIntoView({behavior:"smooth"})})}),navigator&&navigator.clipboard&&addCopyButtons(navigator.clipboard),loadPlantUMLOnNeed(),loadMermaidOnNeed()})</script></div></body></html>